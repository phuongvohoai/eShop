@page "/catalog/types"

<MudGrid>
    <MudItem xs="12">
        <CatalogTypeEditForm CatalogType="_selectedCatalogType"></CatalogTypeEditForm>
    </MudItem>
    <MudItem xs="12">
        <MudDataGrid Items="_catalogTypes" ReadOnly="false" SortMode="SortMode.Single" Filterable="true"
                     QuickFilter="QuickFilter" Hover="true" @bind-SelectedItems="_selectedCatalogTypes"
                     Striped="true" EditMode="DataGridEditMode.Form" EditTrigger="DataGridEditTrigger.Manual"
                     Elevation="5" MultiSelection="true">
            <ToolBarContent>
                <MudStack Row="true" Spacing="2">
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Outlined.Add"
                               OnClick="() => _selectedCatalogType = new CatalogTypeDto()">Add Type
                    </MudButton>
                    @if (_selectedCatalogTypes.Count > 0)
                    {
                        <MudButton Variant="Variant.Filled" Color="Color.Secondary"StartIcon="@Icons.Material.Outlined.Delete">
                            Bulk Delete
                        </MudButton>
                    }
                </MudStack>
                <MudSpacer/>
                <MudTextField @bind-Value="_searchString" Placeholder="Search" Variant="Variant.Outlined"
                              Adornment="Adornment.Start" Immediate="true" DebounceInterval="300" Margin="Margin.Dense"
                              AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium"
                              Class="mt-0"></MudTextField>
            </ToolBarContent>

            <Columns>
                <SelectColumn T="CatalogTypeDto"/>
                <PropertyColumn Property="a => a.Id" HeaderStyle="width: 200px" Title="Id"/>
                <PropertyColumn Property="a => a.Name" Title="Catalog Type Name"/>
                <TemplateColumn CellClass="d-flex justify-end gap-2" HeaderStyle="width: 100px;">
                    <CellTemplate>
                        <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.Edit"
                                       OnClick="() => _selectedCatalogType = context.Item"/>
                        <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.Delete"
                                       Color="Color.Secondary"/>
                    </CellTemplate>
                </TemplateColumn>
            </Columns>

            <PagerContent>
                <MudDataGridPager T="CatalogTypeDto"/>
            </PagerContent>
        </MudDataGrid>
    </MudItem>
</MudGrid>